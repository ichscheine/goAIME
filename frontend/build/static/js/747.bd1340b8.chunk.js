"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[747],{747:(e,a,r)=>{r.r(a),r.d(a,{default:()=>i});var t=r(43),s=r(213),c=r(662),o=r(579);const i=e=>{let{username:a}=e;const[r,i]=(0,t.useState)(!0),[l,n]=(0,t.useState)(null),[d,h]=(0,t.useState)({topicPerformance:{},difficultyPerformance:{},overallPerformance:{totalSessions:0,totalProblems:0,averageScore:0,accuracyPercentage:0,averageSpeed:0},recentSessions:[],trendData:{accuracy:[],score:[],dates:[]},cohortComparison:{userScore:0,userAccuracy:0,userSpeed:0,peerMaxScore:0,peerMaxAccuracy:0,peerMaxSpeed:0,userScorePercentile:0,userAccuracyPercentile:0,userSpeedPercentile:0}});(0,t.useEffect)((()=>{!async function(){if(a){i(!0),n(null);try{console.log(`Fetching progress data for user: ${a}`);const r=await fetch("/api/health");if(console.log("API health check:",r.ok?"OK":"Failed"),"goamy"===a)try{const e=await s.A.get(`/api/cohort/metrics/${a}`);console.log("Cohort metrics response for goAmy:",e.data),console.log("User speed from cohort metrics:",e.data.data.userSpeed)}catch(l){console.error("Error fetching cohort metrics:",l)}const t=await s.A.get(`/api/user/progress/${a}`);if(console.log("Progress data response:",t),t.data&&t.data.success){console.log("Progress data structure:",JSON.stringify(t.data.data,null,2)),t.data.data.difficultyPerformance&&0!==Object.keys(t.data.data.difficultyPerformance).length||console.warn("Missing difficulty performance data from backend"),t.data.data.topicPerformance&&0!==Object.keys(t.data.data.topicPerformance).length||console.warn("Missing topic performance data from backend");try{const e=await s.A.get(`/api/cohort/metrics/${a}`);if(console.log("Cohort metrics response:",e.data),e.data&&e.data.success){const a=t.data.data.overallPerformance.averageScore,r=t.data.data.overallPerformance.accuracyPercentage,s=t.data.data.overallPerformance.averageSpeed;t.data.data.cohortComparison={...t.data.data.cohortComparison,...e.data.data,userScore:a,userAccuracy:r,userSpeed:s},console.log("Combined data with cohort metrics (preserving user metrics from overallPerformance):",t.data.data.cohortComparison)}}catch(e){console.warn("Failed to fetch cohort metrics, will use basic data:",e)}console.log("Cohort comparison data from API:",t.data.data.cohortComparison),t.data.data.cohortComparison.userScore&&t.data.data.cohortComparison.peerMaxScore||(console.warn("Adding or completing cohort data"),t.data.data.cohortComparison.userScore=t.data.data.overallPerformance.averageScore,console.log("Setting userScore from overallPerformance:",t.data.data.cohortComparison.userScore),t.data.data.cohortComparison.userAccuracy=t.data.data.overallPerformance.accuracyPercentage,console.log("Setting userAccuracy from overallPerformance:",t.data.data.cohortComparison.userAccuracy),t.data.data.overallPerformance.averageSpeed?(t.data.data.cohortComparison.userSpeed=t.data.data.overallPerformance.averageSpeed,console.log("Setting userSpeed from overallPerformance:",t.data.data.cohortComparison.userSpeed)):(console.warn("No speed data found, using default value"),t.data.data.cohortComparison.userSpeed=45,t.data.data.overallPerformance.averageSpeed=45),t.data.data.cohortComparison.peerMaxScore||(console.warn("Using mock peer max score"),t.data.data.cohortComparison.peerMaxScore=45),t.data.data.cohortComparison.peerMaxAccuracy||(console.warn("Using mock peer max accuracy"),t.data.data.cohortComparison.peerMaxAccuracy=24),t.data.data.cohortComparison.peerMaxSpeed||(console.warn("Using mock peer max speed"),t.data.data.cohortComparison.peerMaxSpeed=30),t.data.data.overallPerformance.averageSpeed||(t.data.data.cohortComparison.userSpeed?(t.data.data.overallPerformance.averageSpeed=t.data.data.cohortComparison.userSpeed,console.log("Setting averageSpeed from cohort metrics:",t.data.data.overallPerformance.averageSpeed)):t.data.data.overallPerformance.averageSpeed=45)),t.data.data.overallPerformance&&t.data.data.cohortComparison&&(t.data.data.cohortComparison.userSpeed&&!t.data.data.overallPerformance.averageSpeed?t.data.data.overallPerformance.averageSpeed=t.data.data.cohortComparison.userSpeed:t.data.data.overallPerformance.averageSpeed&&!t.data.data.cohortComparison.userSpeed&&(t.data.data.cohortComparison.userSpeed=t.data.data.overallPerformance.averageSpeed),t.data.data.overallPerformance.averageSpeed&&(0===t.data.data.cohortComparison.userSpeed||isNaN(t.data.data.cohortComparison.userSpeed))&&(t.data.data.cohortComparison.userSpeed=t.data.data.overallPerformance.averageSpeed),console.log("Final consistency check - overallPerformance:",{averageScore:t.data.data.overallPerformance.averageScore,accuracyPercentage:t.data.data.overallPerformance.accuracyPercentage,averageSpeed:t.data.data.overallPerformance.averageSpeed}),console.log("Final consistency check - cohortComparison:",{userScore:t.data.data.cohortComparison.userScore,userAccuracy:t.data.data.cohortComparison.userAccuracy,userSpeed:t.data.data.cohortComparison.userSpeed})),h(t.data.data)}else n("Failed to load progress data")}catch(l){console.error("Error fetching progress data:",l),n("Error connecting to server")}finally{i(!1)}}}()}),[a]),(0,t.useEffect)((()=>{console.log("Current progressData state:",d)}),[d]);const x=e=>`${Math.round(e)}%`,m=()=>{if(!d.cohortComparison.userSpeed||!d.cohortComparison.peerMaxSpeed)return console.warn("Missing speed data for percentile calculation:",{userSpeed:d.cohortComparison.userSpeed,peerMaxSpeed:d.cohortComparison.peerMaxSpeed}),10;const e=Number(d.cohortComparison.userSpeed),a=Number(d.cohortComparison.peerMaxSpeed);if(e<=0)return 100;if(a<=0)return 20;if(e>a){const r=Math.min(3,e/a);return Math.max(5,Math.round(20-5*(r-1)))}const r=Math.max(20,Math.min(95,100*(1-e/a)));return console.log(`Speed Percentile Calculation: userSpeed=${e}s, peerMaxSpeed=${a}s, percentile=${r.toFixed(2)}%`),r},p=()=>{let e="";const a=[...[{name:"Score",value:d.cohortComparison.userScore/100*100},{name:"Accuracy",value:d.cohortComparison.userAccuracy},{name:"Speed",value:m()}]].sort(((e,a)=>a.value-e.value));return console.log("Metric Rankings:"),a.forEach(((e,a)=>{console.log(`  ${a+1}. ${e.name}: ${e.value.toFixed(2)}%`)})),e=a[0].name,e},f=e=>{try{return new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}catch(a){return"Unknown date"}};return(0,o.jsxs)("div",{className:"progress-tracking-container",children:[(0,o.jsxs)("div",{className:"progress-header",children:[(0,o.jsx)("h2",{children:"Your Progress Dashboard"}),(0,o.jsx)(c.N_,{to:"/dashboard",className:"back-to-dashboard",children:"Back to Dashboard"})]}),r?(0,o.jsxs)("div",{className:"progress-loading",children:[(0,o.jsx)("div",{className:"spinner"}),(0,o.jsx)("p",{children:"Loading your progress data..."})]}):l?(0,o.jsxs)("div",{className:"progress-error",children:[(0,o.jsx)("p",{children:l}),(0,o.jsx)("p",{children:"Please try again later or contact support if the issue persists."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"progress-intro",children:(0,o.jsx)("p",{children:"Track your improvement over time with detailed performance analytics. The more you practice, the more insights you'll see here!"})}),(0,o.jsxs)("div",{className:"progress-overview",children:[(0,o.jsx)("h3",{children:"Overall Performance"}),(0,o.jsxs)("div",{className:"overview-stats",children:[(0,o.jsxs)("div",{className:"overview-stat",children:[(0,o.jsx)("div",{className:"stat-value",children:d.overallPerformance.totalSessions}),(0,o.jsx)("div",{className:"stat-label",children:"Total Sessions"})]}),(0,o.jsxs)("div",{className:"overview-stat",children:[(0,o.jsx)("div",{className:"stat-value",children:d.overallPerformance.totalProblems}),(0,o.jsx)("div",{className:"stat-label",children:"Problems Attempted"})]}),(0,o.jsxs)("div",{className:"overview-stat",children:[(0,o.jsx)("div",{className:"stat-value",children:d.overallPerformance.averageScore.toFixed(2)}),(0,o.jsx)("div",{className:"stat-label",children:"Avg. Score / Session"})]}),(0,o.jsxs)("div",{className:"overview-stat",children:[(0,o.jsxs)("div",{className:"stat-value",children:[d.overallPerformance.accuracyPercentage.toFixed(2),"%"]}),(0,o.jsx)("div",{className:"stat-label",children:"Avg. Accuracy / Session"})]}),(0,o.jsxs)("div",{className:"overview-stat",children:[(0,o.jsx)("div",{className:"stat-value",children:isNaN(d.overallPerformance.averageSpeed)?"0s":`${Number(d.overallPerformance.averageSpeed).toFixed(0)}s`}),(0,o.jsx)("div",{className:"stat-label",children:"Avg. Speed / Problem"})]}),"            "]})]}),(0,o.jsxs)("div",{className:"performance-section",children:[(0,o.jsx)("h3",{children:"Recent Performance Trend"}),d.trendData&&d.trendData.accuracy&&0===d.trendData.accuracy.length?(0,o.jsx)("p",{className:"no-data",children:"No trend data available yet. Complete more sessions to see your progress over time."}):(0,o.jsx)("div",{className:"trend-chart",children:(0,o.jsxs)("div",{className:"time-series-chart",children:[(0,o.jsxs)("svg",{width:"100%",height:"500",viewBox:"0 0 1000 500",preserveAspectRatio:"xMidYMid meet",children:[(0,o.jsx)("rect",{x:"70",y:"40",width:"860",height:"380",fill:"#f8fafc",rx:"6",ry:"6"}),(0,o.jsx)("line",{x1:"70",y1:"420",x2:"930",y2:"420",stroke:"#cbd5e1",strokeWidth:"2"}),(0,o.jsx)("line",{x1:"70",y1:"40",x2:"70",y2:"420",stroke:"#cbd5e1",strokeWidth:"2"}),(0,o.jsx)("line",{x1:"930",y1:"40",x2:"930",y2:"420",stroke:"#cbd5e1",strokeWidth:"2"})," ",d.trendData&&d.trendData.score&&d.trendData.score.length>0&&(()=>{const e=Math.max(...d.trendData.score),a=Math.ceil(e/4),r=[0,a,2*a,3*a,4*a];return r.map(((e,a)=>(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{x1:"65",y1:420-e*(380/(r[4]||1)),x2:"70",y2:420-e*(380/(r[4]||1)),stroke:"#cbd5e1",strokeWidth:"2"}),(0,o.jsx)("text",{x:"62",y:420-e*(380/(r[4]||1)),textAnchor:"end",alignmentBaseline:"middle",fontSize:"14",fill:"#64748b",children:e})]},`score-tick-${a}`)))})(),[0,25,50,75,100].map(((e,a)=>(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{x1:"930",y1:420-3.8*e,x2:"935",y2:420-3.8*e,stroke:"#cbd5e1",strokeWidth:"2"}),(0,o.jsxs)("text",{x:"938",y:420-3.8*e,textAnchor:"start",alignmentBaseline:"middle",fontSize:"14",fill:"#64748b",children:[e,"%"]})]},`y-tick-${a}`))),[0,25,50,75,100].map(((e,a)=>(0,o.jsx)("line",{x1:"70",y1:420-3.8*e,x2:"930",y2:420-3.8*e,stroke:"#e2e8f0",strokeWidth:"1",strokeDasharray:"5,5"},`grid-${a}`))),d.trendData&&d.trendData.accuracy&&d.trendData.accuracy.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:d.trendData.score.reduce(((e,a,r,t)=>{const s=d.trendData.score.length;return`${e} ${0===r?"M":"L"} ${70+(s-1-r)*(860/(s-1||1))},${420-a*(380/(Math.max(...d.trendData.score)||1))}`}),""),fill:"none",stroke:"#4f46e5",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(()=>{const e=d.trendData.score;if(0===e.length)return null;const a=420-e.reduce(((e,a)=>e+a),0)/e.length*(380/(Math.max(...e)||1));return(0,o.jsx)("line",{x1:"70",y1:a,x2:"930",y2:a,stroke:"#4f46e5",className:"mean-line"})})(),(()=>{const e=d.trendData.score;if(e.length<3)return null;const a=e.reduce(((e,a)=>e+a),0)/e.length,r=e.reduce(((e,r)=>e+Math.pow(r-a,2)),0)/e.length,t=Math.sqrt(r)/Math.sqrt(e.length)*1.96,s=a+t,c=Math.max(0,a-t),i=Math.max(...e),l=420-s*(380/(i||1)),n=420-c*(380/(i||1));return(0,o.jsx)("rect",{x:"70",y:l,width:"860",height:n-l,fill:"#4f46e5",className:"confidence-area"})})(),(0,o.jsx)("path",{d:d.trendData.accuracy.reduce(((e,a,r)=>{const t=d.trendData.accuracy.length;return`${e} ${0===r?"M":"L"} ${70+(t-1-r)*(860/(t-1||1))},${420-3.8*a}`}),""),fill:"none",stroke:"#ffa500",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(()=>{const e=d.trendData.accuracy;if(0===e.length)return null;const a=420-3.8*(e.reduce(((e,a)=>e+a),0)/e.length);return(0,o.jsx)("line",{x1:"70",y1:a,x2:"930",y2:a,stroke:"#ffa500",className:"mean-line"})})(),(()=>{const e=d.trendData.accuracy;if(e.length<3)return null;const a=e.reduce(((e,a)=>e+a),0)/e.length,r=e.reduce(((e,r)=>e+Math.pow(r-a,2)),0)/e.length,t=Math.sqrt(r)/Math.sqrt(e.length)*1.96,s=420-3.8*Math.min(100,a+t),c=420-3.8*Math.max(0,a-t);return(0,o.jsx)("rect",{x:"70",y:s,width:"860",height:c-s,fill:"#ffa500",className:"confidence-area"})})(),d.trendData.score.map(((e,a)=>{const r=d.trendData.score.length,t=70+(r-1-a)*(860/(r-1||1)),s=420-e*(380/(Math.max(...d.trendData.score)||1));return(0,o.jsxs)("g",{children:[(0,o.jsx)("circle",{cx:t,cy:s,r:"6",fill:"#4f46e5"}),(0,o.jsx)("circle",{cx:t,cy:s,r:"4",fill:"#fff"}),(0,o.jsx)("title",{children:`Date: ${f(d.trendData.dates[a])}\nAccuracy: ${d.trendData.accuracy[a]}%\nScore: ${e}`})]},`score-point-${a}`)})),d.trendData.accuracy.map(((e,a)=>{const r=d.trendData.accuracy.length,t=70+(r-1-a)*(860/(r-1||1)),s=420-3.8*e;return(0,o.jsxs)("g",{children:[(0,o.jsx)("circle",{cx:t,cy:s,r:"6",fill:"#ffa500"}),(0,o.jsx)("circle",{cx:t,cy:s,r:"4",fill:"#fff"}),(0,o.jsx)("title",{children:`Date: ${f(d.trendData.dates[a])}\nAccuracy: ${e}%\nScore: ${d.trendData.score[a]}`})]},`accuracy-point-${a}`)})),d.trendData.dates.map(((e,a)=>{const r=d.trendData.dates.length,t=70+(r-1-a)*(860/(r-1||1));return r<=5||0===a||a===r-1||a===Math.floor(r/2)?(0,o.jsx)("text",{x:t,y:"460",textAnchor:"middle",fontSize:"14",fill:"#64748b",transform:`rotate(45 ${t}, 460)`,children:f(e)},`x-label-${a}`):null})),(0,o.jsx)("text",{x:"25",y:"230",textAnchor:"middle",fontSize:"15",fontWeight:"600",fill:"#64748b",transform:"rotate(-90 25, 230)",children:"Score"}),(0,o.jsx)("text",{x:"975",y:"230",textAnchor:"middle",fontSize:"15",fontWeight:"600",fill:"#64748b",transform:"rotate(90 975, 230)",children:"Accuracy (%)"})]})]}),(0,o.jsxs)("div",{className:"chart-legend",children:[(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"#4f46e5"}}),(0,o.jsx)("div",{className:"legend-label",children:"Score"})]}),(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"#ffa500"}}),(0,o.jsx)("div",{className:"legend-label",children:"Accuracy (%)"})]}),(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"#4f46e5",opacity:"0.2"}}),(0,o.jsx)("div",{className:"legend-label",children:"95% Confidence Interval"})]}),(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{style:{width:"20px",height:"2px",backgroundColor:"#4f46e5",margin:"8px 0",backgroundImage:"linear-gradient(to right, #4f46e5 50%, transparent 50%)",backgroundSize:"8px 100%"}}),(0,o.jsx)("div",{className:"legend-label",children:"Mean Value"})]})]}),(()=>{const e=d.trendData.score,a=d.trendData.accuracy;if(0===e.length||0===a.length)return null;const r=e.reduce(((e,a)=>e+a),0)/e.length,t=e.reduce(((e,a)=>e+Math.pow(a-r,2)),0)/e.length,s=Math.sqrt(t),c=s/Math.sqrt(e.length)*1.96,i=a.reduce(((e,a)=>e+a),0)/a.length,l=a.reduce(((e,a)=>e+Math.pow(a-i,2)),0)/a.length,n=Math.sqrt(l),h=n/Math.sqrt(a.length)*1.96;return(0,o.jsxs)("div",{className:"trend-statistics",children:[(0,o.jsxs)("div",{className:"trend-stat",children:[(0,o.jsx)("div",{className:"trend-stat-value",children:r.toFixed(1)}),(0,o.jsx)("div",{className:"trend-stat-label",children:"Mean Score"})]}),(0,o.jsxs)("div",{className:"trend-stat",children:[(0,o.jsxs)("div",{className:"trend-stat-value",children:["\xb1",c.toFixed(1)]}),(0,o.jsx)("div",{className:"trend-stat-label",children:"Score 95% CI"})]}),(0,o.jsxs)("div",{className:"trend-stat",children:[(0,o.jsxs)("div",{className:"trend-stat-value",children:[i.toFixed(1),"%"]}),(0,o.jsx)("div",{className:"trend-stat-label",children:"Mean Accuracy"})]}),(0,o.jsxs)("div",{className:"trend-stat",children:[(0,o.jsxs)("div",{className:"trend-stat-value",children:["\xb1",h.toFixed(1),"%"]}),(0,o.jsx)("div",{className:"trend-stat-label",children:"Accuracy 95% CI"})]}),(0,o.jsxs)("div",{className:"trend-stat",children:[(0,o.jsx)("div",{className:"trend-stat-value",children:s.toFixed(1)}),(0,o.jsx)("div",{className:"trend-stat-label",children:"Score Std Dev"})]}),(0,o.jsxs)("div",{className:"trend-stat",children:[(0,o.jsxs)("div",{className:"trend-stat-value",children:[n.toFixed(1),"%"]}),(0,o.jsx)("div",{className:"trend-stat-label",children:"Accuracy Std Dev"})]})]})})(),(0,o.jsx)("div",{className:"trend-info",children:(0,o.jsxs)("p",{children:["This chart shows your performance trend over your ",d.trendData.dates.length," most recent sessions. Statistics may differ from overall lifetime averages."]})})]})})]}),(0,o.jsxs)("div",{className:"performance-section",children:[(0,o.jsx)("h3",{children:"Comparison with Peers"}),d.cohortComparison&&0===d.cohortComparison.userAccuracy?(0,o.jsx)("p",{className:"no-data",children:"No comparison data available yet. Complete more sessions to see how you compare with peers."}):(0,o.jsxs)("div",{className:"cohort-comparison",children:[(0,o.jsx)("div",{className:"comparison-info",children:(0,o.jsx)("p",{children:"See how your performance compares to other students working on similar problems."})}),(0,o.jsxs)("div",{className:"comparison-container",children:[(0,o.jsxs)("div",{className:"performance-insights-column",children:[(0,o.jsxs)("div",{className:"metric-card strongest-metric-card",children:[(0,o.jsx)("div",{className:"section-title",children:"Your Strongest Metric"}),(0,o.jsx)("div",{className:"best-metric-container",children:(()=>{const e=p();let a="",r="#4f46e5";return"Score"===e?(a=`${Number(d.cohortComparison.userScore).toFixed(2)}/${Number(d.cohortComparison.peerMaxScore).toFixed(1)}`,r="#4f46e5"):"Accuracy"===e?(a=`${Number(d.cohortComparison.userAccuracy).toFixed(2)}%`,r="#ffa500"):"Speed"===e&&(a=`${Number(d.cohortComparison.userSpeed).toFixed(0)}s`,r="#10b981"),(0,o.jsxs)("div",{className:"best-metric-highlight",style:{color:r},children:[(0,o.jsx)("span",{className:"best-metric-name",children:e}),(0,o.jsx)("span",{className:"best-metric-value",children:a}),"Speed"===e&&(0,o.jsx)("span",{style:{fontSize:"0.8rem",marginTop:"5px"},children:"(lower time is better)"})]})})()}),(0,o.jsx)("div",{className:"percentile-text",children:(()=>{const e=p();let a=0;return"Score"===e?a=d.cohortComparison.userScorePercentile||Math.round(d.cohortComparison.userScore/d.cohortComparison.peerMaxScore*100):"Accuracy"===e?a=d.cohortComparison.userAccuracyPercentile||Math.round(d.cohortComparison.userAccuracy/d.cohortComparison.peerMaxAccuracy*100):"Speed"===e&&(a=d.cohortComparison.userSpeedPercentile||m()),`Your percentile: ${Math.round(a)}%`})()})]}),(0,o.jsxs)("div",{className:"metric-card percentile-card",children:[(0,o.jsx)("div",{className:"section-title",children:"Your Current Rankings"}),(0,o.jsx)("div",{className:"percentile-rankings",children:(()=>{const e=d.cohortComparison.userScorePercentile||Math.round(d.cohortComparison.userScore/d.cohortComparison.peerMaxScore*100),a=d.cohortComparison.userAccuracyPercentile||Math.round(d.cohortComparison.userAccuracy/d.cohortComparison.peerMaxAccuracy*100),r=d.cohortComparison.userSpeedPercentile||m();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"percentile-item",children:[(0,o.jsx)("div",{className:"percentile-label",children:"Score"}),(0,o.jsx)("div",{className:"percentile-bar-container",children:(0,o.jsx)("div",{className:"percentile-bar",style:{width:`${e}%`,backgroundColor:"#4f46e5"}})}),(0,o.jsxs)("div",{className:"percentile-value",children:[Math.round(e),"%"]})]}),(0,o.jsxs)("div",{className:"percentile-item",children:[(0,o.jsx)("div",{className:"percentile-label",children:"Accuracy"}),(0,o.jsx)("div",{className:"percentile-bar-container",children:(0,o.jsx)("div",{className:"percentile-bar",style:{width:`${a}%`,backgroundColor:"#ffa500"}})}),(0,o.jsxs)("div",{className:"percentile-value",children:[Math.round(a),"%"]})]}),(0,o.jsxs)("div",{className:"percentile-item",children:[(0,o.jsx)("div",{className:"percentile-label",children:"Speed"}),(0,o.jsx)("div",{className:"percentile-bar-container",children:(0,o.jsx)("div",{className:"percentile-bar",style:{width:`${r}%`,backgroundColor:"#10b981"}})}),(0,o.jsxs)("div",{className:"percentile-value",children:[Math.round(r),"%"]})]}),(0,o.jsxs)("div",{className:"percentile-explanation",children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,o.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),(0,o.jsx)("span",{children:"Percentiles show how you rank compared to peers. Higher is better."})]})]})})()})]})]}),(0,o.jsxs)("div",{className:"radar-chart-section",children:[(0,o.jsx)("div",{className:"section-title",children:"Performance Metrics Comparison"}),(0,o.jsx)("div",{style:{alignSelf:"center",width:"100%",display:"flex",justifyContent:"center"},className:"radar-chart",children:(0,o.jsxs)("svg",{width:"100%",height:"430",viewBox:"-45 0 528 528",preserveAspectRatio:"xMidYMid meet",children:[(0,o.jsx)("circle",{cx:"264",cy:"264",r:69.3,fill:"rgba(226, 232, 240, 0.25)",stroke:"#e2e8f0",strokeWidth:"1.5",strokeDasharray:"4,3"}),[.25,.5,.75,1].map(((e,a)=>(0,o.jsxs)("g",{children:[(0,o.jsx)("circle",{cx:"264",cy:"264",r:198*e,fill:.25===e?"rgba(226, 232, 240, 0.1)":.5===e?"rgba(226, 232, 240, 0.15)":.75===e?"rgba(226, 232, 240, 0.05)":"rgba(226, 232, 240, 0.02)",stroke:1===e?"#cbd5e1":"#e2e8f0",strokeWidth:1===e?"1.5":"1",opacity:1===e?.9:.7}),.25===e&&(0,o.jsxs)("text",{x:"270",y:264-198*e,textAnchor:"start",fontSize:"13",fill:"#64748b",opacity:"1",fontWeight:"600",style:{textShadow:"0px 0px 3px #ffffff, 0px 0px 3px #ffffff"},children:[Math.round(100*e),"%"]}),.5===e&&(0,o.jsxs)("text",{x:"270",y:264-198*e,textAnchor:"start",fontSize:"13",fill:"#64748b",opacity:"1",fontWeight:"600",style:{textShadow:"0px 0px 3px #ffffff, 0px 0px 3px #ffffff"},children:[Math.round(100*e),"%"]}),.75===e&&(0,o.jsxs)("text",{x:"270",y:264-198*e,textAnchor:"start",fontSize:"13",fill:"#64748b",opacity:"1",fontWeight:"600",style:{textShadow:"0px 0px 3px #ffffff, 0px 0px 3px #ffffff"},children:[Math.round(100*e),"%"]}),1===e&&(0,o.jsx)("text",{x:"270",y:264-198*e,textAnchor:"start",fontSize:"13",fill:"#64748b",opacity:"1",fontWeight:"600",style:{textShadow:"0px 0px 3px #ffffff, 0px 0px 3px #ffffff"},children:"100%"})]},`bg-circle-${a}`))),[{label:"Score",angle:0},{label:"Accuracy",angle:120},{label:"Speed",angle:240}].map(((e,a)=>{const r=(e.angle-90)*(Math.PI/180),t=264+198*Math.cos(r),s=264+198*Math.sin(r),c=(e.angle-90)*(Math.PI/180),i=264+238*Math.cos(c),l=264+238*Math.sin(c),n=264+260*Math.cos(c),h=264+260*Math.sin(c);return(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{x1:"264",y1:"264",x2:t,y2:s,stroke:"Score"===e.label?"rgba(79, 70, 229, 0.4)":"Accuracy"===e.label?"rgba(255, 165, 0, 0.4)":"rgba(16, 185, 129, 0.4)",strokeWidth:"2.5"}),(0,o.jsx)("text",{x:i,y:l,textAnchor:"middle",dominantBaseline:"middle",className:"radar-axis-label",fill:"Score"===e.label?"#4f46e5":"Accuracy"===e.label?"#ffa500":"#10b981",style:{textShadow:"0px 0px 4px #ffffff, 0px 0px 5px rgba(255,255,255,0.9)",fontWeight:"bold"},children:e.label}),(0,o.jsx)("text",{x:n,y:h+8,textAnchor:"middle",fontSize:"11",fill:"#64748b",className:"radar-axis-value",style:{fontStyle:"italic",textShadow:"0px 0px 4px #ffffff, 0px 0px 4px #ffffff"},children:"Speed"===e.label?`(peer best: ${Number(d.cohortComparison.peerMaxSpeed).toFixed(0)}s)`:"Accuracy"===e.label?`(max: ${Number(d.cohortComparison.peerMaxAccuracy).toFixed(2)}%)`:`(max: ${Number(d.cohortComparison.peerMaxScore).toFixed(2)})`})]},`axis-${a}`)})),(0,o.jsx)("path",{d:(()=>{const e=Math.PI/180*-90,a=Math.PI/180*30,r=Math.PI/180*150,t=d.cohortComparison.peerMaxScore/100,s=d.cohortComparison.peerMaxAccuracy/100,c=(()=>{const e=Number(d.cohortComparison.peerMaxSpeed),a=(60-Math.max(5,Math.min(60,e)))/55;return console.log(`Peer speed: ${e}s, normalized ratio: ${a.toFixed(2)}`),a})();console.log("Peer triangle values (absolute percentages):",{score:`${(100*t).toFixed(1)}% (${d.cohortComparison.peerMaxScore} / 100)`,accuracy:`${(100*s).toFixed(1)}% (${d.cohortComparison.peerMaxAccuracy}%)`,speed:`${(100*c).toFixed(1)}% (${d.cohortComparison.peerMaxSpeed}s)`});return`M ${264+198*t*Math.cos(e)} ${264+198*t*Math.sin(e)} L ${264+198*s*Math.cos(a)} ${264+198*s*Math.sin(a)} L ${264+198*c*Math.cos(r)} ${264+198*c*Math.sin(r)} Z`})(),fill:"rgba(148, 163, 184, 0.2)",stroke:"#94a3b8",strokeWidth:"2",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:(()=>{const e=Math.PI/180*-90,a=Math.PI/180*30,r=Math.PI/180*150;return`M ${264+198*Math.cos(e)} ${264+198*Math.sin(e)} L ${264+198*Math.cos(a)} ${264+198*Math.sin(a)} L ${264+198*Math.cos(r)} ${264+198*Math.sin(r)} Z`})(),fill:"rgba(229, 62, 62, 0.05)",stroke:"#e53e3e",strokeWidth:"2.5",strokeLinejoin:"round"}),[{label:"Score",angle:Math.PI/180*-90},{label:"Accuracy",angle:Math.PI/180*30},{label:"Speed",angle:Math.PI/180*150}].map(((e,a)=>{const r=264+198*Math.cos(e.angle),t=264+198*Math.sin(e.angle);return Math.cos(e.angle),Math.sin(e.angle),(0,o.jsxs)("g",{children:[(0,o.jsx)("circle",{cx:r,cy:t,r:"5",fill:"#e53e3e"}),(0,o.jsx)("circle",{cx:r,cy:t,r:"3",fill:"#fff"})]},`max-point-${a}`)})),(0,o.jsx)("path",{d:(()=>{const e=Math.PI/180*-90,a=Math.PI/180*30,r=Math.PI/180*150,t=d.cohortComparison.userScore/100,s=d.cohortComparison.userAccuracy/100,c=m()/100;console.log("User Radar Chart Ratios (before scaling):",{score:`${(100*t).toFixed(1)}% (${d.cohortComparison.userScore} / 100)`,accuracy:`${(100*s).toFixed(1)}% (${d.cohortComparison.userAccuracy}%)`,speed:`${(100*c).toFixed(1)}% (${d.cohortComparison.userSpeed}s, ${m().toFixed(1)} percentile)`});const o=.05,i=o+.95*t,l=o+.95*s,n=o+.95*c;return`M ${264+198*i*Math.cos(e)} ${264+198*i*Math.sin(e)} L ${264+198*l*Math.cos(a)} ${264+198*l*Math.sin(a)} L ${264+198*n*Math.cos(r)} ${264+198*n*Math.sin(r)} Z`})(),fill:"rgba(79, 70, 229, 0.45)",stroke:"#4f46e5",strokeWidth:"2.5"}),(()=>{const e=Math.PI/180*-90,a=Math.PI/180*30,r=Math.PI/180*150,t=d.cohortComparison.userScore/100,s=d.cohortComparison.userAccuracy/100,c=m()/100,i=.05,l=i+.95*t,n=i+.95*s,h=i+.95*c,x=264+198*l*Math.cos(e),p=264+198*l*Math.sin(e),f=264+198*n*Math.cos(a),u=264+198*n*Math.sin(a),g=264+198*h*Math.cos(r),v=264+198*h*Math.sin(r);let j=0;const y=[...[{ratio:t,index:0,name:"Score"},{ratio:s,index:1,name:"Accuracy"},{ratio:c,index:2,name:"Speed"}]].sort(((e,a)=>a.ratio-e.ratio));return j=y[0].index,console.log("Radar Chart Metric Rankings:",y.map((e=>`${e.name}: ${(100*e.ratio).toFixed(2)}%`)).join(", ")),[{x:x,y:p,label:"Score",value:`${Number(d.cohortComparison.userScore).toFixed(2)}`,max:`${Number(d.cohortComparison.peerMaxScore).toFixed(2)}`,isBest:0===j},{x:f,y:u,label:"Accuracy",value:`${Number(d.cohortComparison.userAccuracy).toFixed(2)}%`,max:`${Number(d.cohortComparison.peerMaxAccuracy).toFixed(2)}%`,isBest:1===j},{x:g,y:v,label:"Speed",value:`${Number(d.cohortComparison.userSpeed).toFixed(0)}s`,max:`${Number(d.cohortComparison.peerMaxSpeed).toFixed(0)}s`,percentile:Math.max(0,Math.round(m())),isBest:2===j}].map(((e,a)=>(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:e.x-28,y:e.y-30,width:"56",height:"24",rx:"6",ry:"6",fill:e.isBest?"rgba(16, 185, 129, 0.25)":"Score"===e.label?"rgba(79, 70, 229, 0.25)":"Accuracy"===e.label?"rgba(255, 165, 0, 0.25)":"rgba(16, 185, 129, 0.25)",stroke:e.isBest?"#10b981":"Score"===e.label?"#4f46e5":"Accuracy"===e.label?"#ffa500":"#10b981",strokeWidth:e.isBest?"1.5":"1",style:{filter:e.isBest?"drop-shadow(0px 0px 4px rgba(16, 185, 129, 0.6))":"drop-shadow(0px 0px 2px rgba(0, 0, 0, 0.1))",opacity:.95}}),(0,o.jsx)("circle",{cx:e.x,cy:e.y,r:"8",fill:e.isBest?"#10b981":"Score"===e.label?"#4f46e5":"Accuracy"===e.label?"#ffa500":"#10b981"}),(0,o.jsx)("circle",{cx:e.x,cy:e.y,r:"5",fill:"#fff"}),(0,o.jsx)("text",{x:e.x,y:e.y-18,textAnchor:"middle",className:"radar-metric-value",fill:e.isBest?"#10b981":"Score"===e.label?"#4f46e5":"Accuracy"===e.label?"#ffa500":"#10b981",style:{textShadow:"0px 0px 5px #fff, 0px 0px 5px #fff",fontWeight:"700",letterSpacing:"0.2px"},children:e.value}),e.isBest&&(0,o.jsxs)("g",{children:[(0,o.jsx)("rect",{x:e.x+16,y:e.y-30,width:"18",height:"18",rx:"9",ry:"9",fill:"#10b981",style:{filter:"drop-shadow(0px 0px 3px rgba(16, 185, 129, 0.8))"}}),(0,o.jsx)("text",{x:e.x+25,y:e.y-20,textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"white",style:{textShadow:"0px 0px 1px rgba(0,0,0,0.3)"},children:"\u2605"})]})]},`point-${a}`)))})(),(0,o.jsx)("circle",{cx:"264",cy:"264",r:"4",fill:"#64748b"}),(0,o.jsx)("circle",{cx:"264",cy:"264",r:"8",fill:"rgba(100, 116, 139, 0.2)",stroke:"#64748b",strokeWidth:"1"})]})}),(0,o.jsxs)("div",{style:{alignSelf:"flex-start",width:"100%"},className:"radar-legend",children:[(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"rgba(79, 70, 229, 0.45)",border:"2px solid #4f46e5"}}),(0,o.jsx)("div",{className:"legend-label",children:"Your Performance"})]}),(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"rgba(148, 163, 184, 0.2)",border:"2px solid #94a3b8"}}),(0,o.jsx)("div",{className:"legend-label",children:"Peer Best Values"})]}),(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"rgba(229, 62, 62, 0.05)",border:"2px solid #e53e3e"}}),(0,o.jsx)("div",{className:"legend-label",children:"Theoretical Maximum (100%)"})]}),(0,o.jsxs)("div",{className:"legend-item",children:[(0,o.jsx)("div",{className:"legend-color",style:{backgroundColor:"#10b981"}}),(0,o.jsx)("div",{className:"legend-label",children:"Your Best Metric"})]})]}),(0,o.jsx)("div",{className:"spacer-between-sections"})]})]})]})]}),(0,o.jsxs)("div",{className:"performance-section",children:[(0,o.jsx)("h3",{children:"Performance by Difficulty"}),(0,o.jsxs)("div",{className:"difficulty-chart-container",children:[(0,o.jsx)("div",{className:"difficulty-chart",children:Object.entries(d.difficultyPerformance).map((e=>{let[a,r]=e;return(0,o.jsxs)("div",{className:`difficulty-bar difficulty-${a.toLowerCase()}`,children:[(0,o.jsx)("div",{className:"difficulty-label",children:a}),(0,o.jsxs)("div",{className:"bar-container",children:[(0,o.jsx)("div",{className:"bar-fill",style:{width:`${r.accuracy}%`}}),(0,o.jsx)("div",{className:"bar-text",children:x(r.accuracy)})]}),(0,o.jsxs)("div",{className:"attempt-info",children:[r.correct,"/",r.attempted," correct"]}),(0,o.jsx)("div",{className:"donut-chart-container",children:(0,o.jsxs)("svg",{width:"60",height:"60",viewBox:"0 0 60 60",children:[(0,o.jsx)("circle",{cx:"30",cy:"30",r:"25",fill:"none",stroke:"#e2e8f0",strokeWidth:"8"}),(0,o.jsx)("circle",{cx:"30",cy:"30",r:"25",fill:"none",stroke:"Easy"===a?"#10b981":"Medium"===a?"#f59e0b":"#ef4444",strokeWidth:"8",strokeDasharray:r.accuracy/100*157+" 157",strokeDashoffset:"0",transform:"rotate(-90 30 30)"}),(0,o.jsxs)("text",{x:"30",y:"30",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14",fontWeight:"bold",fill:"#334155",children:[Math.round(r.accuracy),"%"]})]})})]},a)}))}),(0,o.jsxs)("div",{className:"difficulty-summary",children:[(0,o.jsxs)("div",{className:"difficulty-stats",children:[(0,o.jsxs)("div",{className:"difficulty-stat-item",children:[(0,o.jsx)("div",{className:"difficulty-stat-value",children:Object.values(d.difficultyPerformance).reduce(((e,a)=>e+a.attempted),0)}),(0,o.jsx)("div",{className:"difficulty-stat-label",children:"Total Problems"})]}),(0,o.jsxs)("div",{className:"difficulty-stat-item",children:[(0,o.jsxs)("div",{className:"difficulty-stat-value",children:[Math.round(Object.values(d.difficultyPerformance).reduce(((e,a)=>a.attempted>0?e+a.accuracy*a.attempted:e),0)/Object.values(d.difficultyPerformance).reduce(((e,a)=>e+a.attempted),0)||0),"%"]}),(0,o.jsx)("div",{className:"difficulty-stat-label",children:"Avg. Accuracy"})]})]}),(0,o.jsx)("div",{className:"difficulty-info",children:(0,o.jsx)("p",{children:"This chart shows your performance across different difficulty levels. The circles indicate your accuracy percentage for each difficulty level."})})]})]})]}),(0,o.jsxs)("div",{className:"performance-section",children:[(0,o.jsx)("h3",{children:"Performance by Topic"}),(0,o.jsxs)("div",{className:"topic-visualization-container",children:[(0,o.jsx)("div",{className:"topic-chart",children:Object.entries(d.topicPerformance).sort(((e,a)=>a[1].attempted-e[1].attempted)).slice(0,6).map(((e,a)=>{let[r,t]=e;return(0,o.jsxs)("div",{className:"topic-row",children:[(0,o.jsx)("div",{className:"topic-name",children:r}),(0,o.jsxs)("div",{className:"bar-container",children:[(0,o.jsx)("div",{className:"bar-fill",style:{width:`${t.accuracy}%`,background:`linear-gradient(90deg, \n                              ${a%3===0?"#4f46e5":a%3===1?"#0ea5e9":"#8b5cf6"}, \n                              ${a%3===0?"#818cf8":a%3===1?"#38bdf8":"#a78bfa"})`}}),(0,o.jsx)("div",{className:"bar-text",children:x(t.accuracy)})]}),(0,o.jsxs)("div",{className:"attempt-info",children:[t.correct,"/",t.attempted]})]},r)}))}),(0,o.jsxs)("div",{className:"topic-circular-visualization",children:[(0,o.jsx)("div",{className:"circular-chart-container",children:(0,o.jsxs)("svg",{width:"300",height:"300",viewBox:"0 0 300 300",children:[(0,o.jsx)("circle",{cx:"150",cy:"150",r:"25",fill:"#f8fafc",stroke:"#e2e8f0",strokeWidth:"1"}),(0,o.jsx)("text",{x:"150",y:"150",textAnchor:"middle",dominantBaseline:"middle",fontSize:"12",fill:"#64748b",children:"Topics"}),Object.entries(d.topicPerformance).sort(((e,a)=>a[1].attempted-e[1].attempted)).slice(0,8).map(((e,a,r)=>{let[t,s]=e;const c=2*Math.PI/r.length,i=a*c-Math.PI/2,l=i+c,n=30,d=30+90*s.accuracy/100,h=150+n*Math.cos(i),x=150+n*Math.sin(i),m=150+n*Math.cos(l),p=150+n*Math.sin(l),f=[`M ${h} ${x}`,`L ${150+d*Math.cos(i)} ${150+d*Math.sin(i)}`,`A ${d} ${d} 0 0 1 ${150+d*Math.cos(l)} ${150+d*Math.sin(l)}`,`L ${m} ${p}`,`A 30 30 0 0 0 ${h} ${x}`,"Z"].join(" "),u=d+15,g=i+c/2,v=150+u*Math.cos(g),j=150+u*Math.sin(g),y=[["#4f46e5","#818cf8"],["#0ea5e9","#38bdf8"],["#8b5cf6","#a78bfa"],["#10b981","#34d399"],["#f59e0b","#fbbf24"],["#ef4444","#f87171"],["#ec4899","#f472b6"],["#8b5cf6","#a78bfa"]];return(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:f,fill:`url(#gradient-${a})`,stroke:"#ffffff",strokeWidth:"1"}),(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:`gradient-${a}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,o.jsx)("stop",{offset:"0%",stopColor:y[a%y.length][0]}),(0,o.jsx)("stop",{offset:"100%",stopColor:y[a%y.length][1]})]})}),(0,o.jsx)("text",{x:v,y:j,textAnchor:g>-Math.PI/2&&g<Math.PI/2?"start":"end",dominantBaseline:"middle",fontSize:"10",fill:"#334155",fontWeight:"500",children:t.length>12?t.substring(0,10)+"...":t}),(0,o.jsx)("line",{x1:150+d*Math.cos(g),y1:150+d*Math.sin(g),x2:150+(u-10)*Math.cos(g),y2:150+(u-10)*Math.sin(g),stroke:"#94a3b8",strokeWidth:"1",strokeDasharray:"2 2"}),(0,o.jsx)("circle",{cx:150+.7*d*Math.cos(g),cy:150+.7*d*Math.sin(g),r:"10",fill:"#ffffff",stroke:y[a%y.length][0],strokeWidth:"1"}),(0,o.jsxs)("text",{x:150+.7*d*Math.cos(g),y:150+.7*d*Math.sin(g),textAnchor:"middle",dominantBaseline:"middle",fontSize:"8",fontWeight:"bold",fill:"#334155",children:[Math.round(s.accuracy),"%"]})]},t)}))]})}),(0,o.jsxs)("div",{className:"topic-summary",children:[(0,o.jsxs)("div",{className:"topic-stats",children:[(0,o.jsxs)("div",{className:"topic-stat-item",children:[(0,o.jsx)("div",{className:"topic-stat-value",children:Object.keys(d.topicPerformance).length}),(0,o.jsx)("div",{className:"topic-stat-label",children:"Topics Attempted"})]}),(0,o.jsxs)("div",{className:"topic-stat-item",children:[(0,o.jsx)("div",{className:"topic-stat-value",children:Object.entries(d.topicPerformance||{}).length>0?Object.entries(d.topicPerformance).sort(((e,a)=>a[1].accuracy-e[1].accuracy))[0][0]:"N/A"}),(0,o.jsx)("div",{className:"topic-stat-label",children:"Strongest Topic"})]})]}),(0,o.jsxs)("div",{className:"topic-info",children:[(0,o.jsx)("p",{children:"This visualization shows your performance across different mathematical topics. The length of each segment represents your accuracy in that topic."}),Object.keys(d.topicPerformance).length>8&&(0,o.jsxs)("div",{className:"more-topics-info",children:["+ ",Object.keys(d.topicPerformance).length-8," more topics not shown in the circular chart"]})]})]})]})]})]}),(0,o.jsxs)("div",{className:"performance-section",children:[(0,o.jsx)("h3",{children:"Recent Sessions"}),(0,o.jsx)("div",{className:"recent-sessions",children:0===d.recentSessions.length?(0,o.jsx)("p",{className:"no-data",children:"No recent sessions found."}):(0,o.jsxs)("table",{className:"sessions-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Date"}),(0,o.jsx)("th",{children:"Contest"}),(0,o.jsx)("th",{children:"Mode"}),(0,o.jsx)("th",{children:"Score"}),(0,o.jsx)("th",{children:"Accuracy"})]})}),(0,o.jsx)("tbody",{children:d.recentSessions.map(((e,a)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:f(e.completedAt)}),(0,o.jsxs)("td",{children:[e.contest," ",e.year]}),(0,o.jsx)("td",{children:e.mode}),(0,o.jsxs)("td",{children:[e.score,"/",e.totalAttempted]}),(0,o.jsx)("td",{children:x(e.accuracy)})]},a)))})]})})]})]})]})}}}]);
//# sourceMappingURL=747.bd1340b8.chunk.js.map